<root main_tree_to_execute = "MainTree">
    <BehaviorTree ID="MainTree">
        <Sequence>
            <!-- 상황 업데이트 -->
            <Sequence>
                <SelectTarget name="SelectTarget" BB="{BB}"/>
                <DirectionVectorUpdate name="DirectionVectorUpdate" BB="{BB}"/>
                <DistanceUpdate name="DistanceUpdate" BB="{BB}"/>
                <CheckSight name="CheckSight" BB="{BB}"/>          
                <AngleOffUpdate name="AngleOffUpdate" BB="{BB}"/>
                <AspectAngleUpdate name="AspectAngleUpdate" BB="{BB}"/>
                <BFM_ModeDetermination name="BFM_ModeDetermination" BB="{BB}" />
            </Sequence>
            
            <!-- BFM 실행 -->
            <Fallback>
                <!-- WEZ 내 무기 교전 -->
                <Sequence>
                    <DECO_DistanceCheck name="DECO_DistanceCheck" BB="{BB}" UpDown="Greater" Distance="152.4" />
                    <DECO_DistanceCheck name="DECO_DistanceCheck" BB="{BB}" UpDown="Less" Distance="914.4" />
                    <DECO_LOSCheck name="DECO_LOSCheck" BB="{BB}" UpDown="Less" InputLOS="2.0" />
                    <Task_WeaponEngagement BB="{BB}" />
                </Sequence>
                <!-- 공격 BFM -->
                <Sequence>
                    <DECO_BFMCheck name="DECO_BFMCheck" BB="{BB}" CheckBFM="OBFM" />
                    <Task_OffensiveBFM name="Task_OffensiveBFM" BB="{BB}" />
                </Sequence>
                <!-- 방어 BFM -->
                <Sequence>
                    <DECO_BFMCheck name="DECO_BFMCheck" BB="{BB}" CheckBFM="DBFM" />
                    <Task_DefensiveBFM name="Task_DefensiveBFM" BB="{BB}" />
                </Sequence>
                <!-- 정면 BFM -->
                <Sequence>
                    <DECO_BFMCheck name="DECO_BFMCheck" BB="{BB}" CheckBFM="HABFM" />
                    <Task_HeadOnBFM name="Task_HeadOnBFM" BB="{BB}" />
                </Sequence>
                <!-- 시저스 BFM -->
                <Sequence>
                    <DECO_BFMCheck name="DECO_BFMCheck" BB="{BB}" CheckBFM="SCISSORS" />
                    <Task_Scissors name="Task_Scissors" BB="{BB}" />
                </Sequence>
            </Fallback>
            
            <!-- 모든 BFM 실행 후 최종 안전성 검사 -->
            <AltitudeSafetyCheck name="AltitudeSafetyCheck" BB="{BB}" />
        </Sequence>
    </BehaviorTree>
</root>